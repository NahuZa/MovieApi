<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Movie REST API kliens</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2rem; }
        button { margin: 0.5rem; padding: 0.5rem 1rem; }
        #output { margin-top: 1rem; white-space: pre-wrap; background: #f4f4f4; padding: 1rem; }
    </style>
</head>
<body>
    <h1>Movie REST API kliens</h1>

    <div>
        <button id="listMovies">Filmek listázása</button>
        <button id="createMovie">Új film létrehozása</button>
    </div>

    <div id="output">Kimenet itt jelenik meg...</div>

    <script src="apiClient.js"></script>
    <script>
        const client = new ApiClient('http://localhost:8000/api');

        // Automatikus login induláskor
        async function login() {
            try {
                const result = await client.login('user@example.com', '12345678');
                document.getElementById('output').textContent =
                    'Login sikeres:\n' + JSON.stringify(result, null, 2);
            } catch (err) {
                document.getElementById('output').textContent =
                    'Login hiba: ' + err.message;
            }
        }

        // Filmek listázása
        document.getElementById('listMovies').addEventListener('click', async () => {
            try {
                const movies = await client.getMovies();
                document.getElementById('output').textContent =
                    'Movies:\n' + JSON.stringify(movies, null, 2);
            } catch (err) {
                document.getElementById('output').textContent =
                    'Hiba: ' + err.message;
            }
        });

        // Új film létrehozása
        document.getElementById('createMovie').addEventListener('click', async () => {
            try {
                const newMovie = await client.createMovie({
                    title: 'The Matrix',
                    genre: 'Sci-Fi',
                    description: 'A hacker felfedezi a valóság valódi természetét.',
                    director: 'The Wachowskis',
                    year: 1999,
                    rating: 8.7
                });

                document.getElementById('output').textContent =
                    'Created movie:\n' + JSON.stringify(newMovie, null, 2);

            } catch (err) {
                document.getElementById('output').textContent =
                    'Hiba: ' + err.message;
            }
        });

        login();
    </script>
</body>
</html>
